# S Pen ì›¹ ì˜¤ë²„ë ˆì´ íŒì„œ ì•±

**ê¸°ìˆ ë°±ì„œ ë° ì‹œìŠ¤í…œ ì•„í‚¤í…íŠ¸ ë³´ê³ ì„œ**

ë²„ì „ 1.0 | 2025.12.10

---

## 1. Executive Summary

ë³¸ ë¬¸ì„œëŠ” Galaxy Tab S9 í™˜ê²½ì—ì„œ ì›¹í˜ì´ì§€ ìœ„ì— S Penìœ¼ë¡œ íŒì„œí•˜ê³ ,
ì†ê°€ë½ìœ¼ë¡œëŠ” ìŠ¤í¬ë¡¤/ì¡°ì‘ì´ ê°€ëŠ¥í•œ ì˜¤ë²„ë ˆì´ ì•±ì˜ ê¸°ìˆ  ëª…ì„¸ ë° êµ¬í˜„ ê³„íšì„ ì •ì˜í•œë‹¤.

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í”„ë¡œì íŠ¸ëª…** | S Pen ì›¹ ì˜¤ë²„ë ˆì´ íŒì„œ ì•± |
| **ëŒ€ìƒ ë””ë°”ì´ìŠ¤** | Galaxy Tab S9 (Android 13+) |
| **ì‚¬ìš© ëª©ì ** | í™”ë©´ë…¹í™”ìš© ì‹¤ì‹œê°„ íŒì„œ (ì„¸ë¡œ Portrait ëª¨ë“œ) |
| **í•µì‹¬ ê¸°ëŠ¥** | S Pen íŒì„œ + ì†ê°€ë½ í†µê³¼ + 3ì´ˆ Fade-out |

---

## 2. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)

### 2.1 ì…ë ¥ ë¶„ë¦¬ (Input Discrimination)

| ì…ë ¥ íƒ€ì… | ë™ì‘ | êµ¬í˜„ ë°©ì‹ |
|-----------|------|-----------|
| S Pen (Stylus) | ì˜¤ë²„ë ˆì´ Canvasì— íŒì„œ | MotionEvent.TOOL_TYPE_STYLUS |
| ì†ê°€ë½ (Finger) | í•˜ìœ„ ì•±ìœ¼ë¡œ Pass-through | FLAG ì„ íƒì  í„°ì¹˜ ì „ë‹¬ |

### 2.2 ë ˆì´ì €íœ íš¨ê³¼ (Fade-out)

Samsung Notes ë ˆì´ì €íœ UX ì¬í˜„:

- ìŠ¤íŠ¸ë¡œí¬ ìƒì„± í›„ 3ì´ˆê°„ ìœ ì§€
- 3.0ì´ˆ ~ 3.5ì´ˆ: Opacity 1.0 â†’ 0.0 (Fade-out)
- 3.5ì´ˆ ì´í›„: ìŠ¤íŠ¸ë¡œí¬ ì‚­ì œ (ë©”ëª¨ë¦¬ í•´ì œ)

### 2.3 UI êµ¬ì„± (Portrait ì„¸ë¡œ ëª¨ë“œ)

| ë²„íŠ¼ | ë™ì‘ | ì œìŠ¤ì²˜ |
|------|------|--------|
| ğŸ¨ ìƒ‰ìƒ | í°ìƒ‰ â†” ë…¸ë‘ â†” ê²€ì • ìˆœí™˜ | ìŠ¤ì™€ì´í”„ ì¢Œ/ìš° |
| â—€ Undo | ë§ˆì§€ë§‰ ìŠ¤íŠ¸ë¡œí¬ ì œê±° | íƒ­ |
| â–¶ Redo | ì œê±°ëœ ìŠ¤íŠ¸ë¡œí¬ ë³µì› | íƒ­ |
| ğŸ§¹ Clear | ì „ì²´ ìŠ¤íŠ¸ë¡œí¬ ì‚­ì œ | íƒ­ |
| ğŸšª Exit | ì˜¤ë²„ë ˆì´ ì¢…ë£Œ | íƒ­ |

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (Technical Architecture)

### 3.1 ê¸°ìˆ  ìŠ¤íƒ

| ë ˆì´ì–´ | ê¸°ìˆ  |
|--------|------|
| UI Framework | Flutter 3.x (Dart) |
| Native Bridge | Kotlin (Android Native) |
| í„°ì¹˜ ë¶„ê¸° | MotionEvent.getToolType() â†’ TOOL_TYPE_STYLUS / FINGER |
| ì˜¤ë²„ë ˆì´ | SYSTEM_ALERT_WINDOW + Custom WindowManager |
| ë Œë”ë§ | CustomPainter (Flutter Canvas) |

### 3.2 ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Flutter UI Layer               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Buttons â”‚ â”‚ Canvas  â”‚ â”‚ Stroke Mgr  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ MethodChannel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Kotlin Native Layer               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚        TouchDispatcher              â”‚    â”‚
â”‚ â”‚ if(toolType==STYLUS) â†’ Flutter      â”‚    â”‚
â”‚ â”‚ if(toolType==FINGER) â†’ PassThrough  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Android WindowManager               â”‚
â”‚   SYSTEM_ALERT_WINDOW + Custom TouchHandler â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 í•µì‹¬ ì œì•½ì‚¬í•­

**ìˆœìˆ˜ Flutterë¡œëŠ” êµ¬í˜„ ë¶ˆê°€ëŠ¥í•œ ì´ìœ :**

```
Android ì…ë ¥ ì‹œìŠ¤í…œ: stylus âŠ‚ touch_event
flutter_overlay_window.notTouchable:
  touch_event ì „ì²´ â†’ pass-through
âˆ´ stylus_eventë„ í•¨ê»˜ pass-throughë¨
```

ë”°ë¼ì„œ Kotlin Nativeì—ì„œ MotionEvent.getToolType() ë¶„ê¸° ì²˜ë¦¬ í•„ìˆ˜.

---

## 4. êµ¬í˜„ ê³„íš (Implementation Plan)

| Phase | ì‘ì—… ë‚´ìš© | ì‚°ì¶œë¬¼ |
|-------|-----------|--------|
| **Phase 1** | Kotlin TouchDispatcher êµ¬í˜„ (í„°ì¹˜ ë¶„ê¸° ë¡œì§) | MainActivity.kt |
| **Phase 2** | Flutter-Kotlin MethodChannel ë¸Œë¦¿ì§€ êµ¬ì¶• | MethodChannel ì„¤ì • |
| **Phase 3** | Flutter Canvas + Stroke ëª¨ë¸ êµ¬í˜„ | CustomPainter, Stroke.dart |
| **Phase 4** | Fade-out íƒ€ì´ë¨¸ + UI ë²„íŠ¼ êµ¬í˜„ | Timer, FAB 5ê°œ |
| **Phase 5** | Galaxy Tab S9 ì‹¤ê¸°ê¸° í…ŒìŠ¤íŠ¸ ë° ìµœì í™” | APK Release |

---

## 5. ë¦¬ìŠ¤í¬ í‰ê°€ (Risk Assessment)

| ë¦¬ìŠ¤í¬ | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|--------|--------|-----------|
| Samsung ë””ë°”ì´ìŠ¤ë³„ S Pen API ì°¨ì´ | ì¤‘ (M) | Samsung S Pen SDK ê²€í†  |
| MotionEvent ë¶„ê¸° ì‹¤íŒ¨ | ìƒ (H) | ì‹¤ê¸°ê¸° ì„ í–‰ ê²€ì¦ (Phase 1) |
| ì˜¤ë²„ë ˆì´ ì„±ëŠ¥ ì €í•˜ | ì¤‘ (M) | Path ìµœì í™”, 60fps íƒ€ê²Ÿ |

---

## 6. ì„±ê³µ ê¸°ì¤€ (Success Criteria)

1. S Pen ì…ë ¥ ì‹œ Canvasì— ì •ìƒ ë Œë”ë§ (100% ì¸ì‹)
2. ì†ê°€ë½ ì…ë ¥ ì‹œ ì›¹í˜ì´ì§€ ìŠ¤í¬ë¡¤/í´ë¦­ ì •ìƒ ë™ì‘
3. ìŠ¤íŠ¸ë¡œí¬ 3ì´ˆ í›„ Fade-out ìì—°ìŠ¤ëŸ¬ì›€
4. UI ë Œë”ë§ 60fps ìœ ì§€ (í™”ë©´ë…¹í™” ì¤‘)
5. ìƒ‰ìƒ ì „í™˜ (í°/ë…¸/ê²€) ìŠ¤ì™€ì´í”„ 0.3ì´ˆ ì´ë‚´ ë°˜ì‘

---

## 7. ê²°ë¡ 

ë³¸ í”„ë¡œì íŠ¸ëŠ” Samsung Notes ë ˆì´ì €íœ + Draw On Screen + Wacom ì •ë°€ì…ë ¥ì˜
ì¥ì ì„ í†µí•©í•œ ë§ì¶¤í˜• íŒì„œ ë„êµ¬ì´ë‹¤.

Flutter ë‹¨ë… êµ¬í˜„ì˜ í•œê³„ë¥¼ ëª…í™•íˆ ì¸ì§€í•˜ê³ , Kotlin Native í•˜ì´ë¸Œë¦¬ë“œ
ì•„í‚¤í…ì²˜ë¡œ ê¸°ìˆ ì  ì œì•½ì„ ìš°íšŒí•œë‹¤.

ì„¸ë¡œ í™”ë©´ UI ìµœì í™” ë° í™”ë©´ë…¹í™” ìš©ë„ì— ìµœì í™”ëœ ì„¤ê³„ë¡œ, ê°œì¸
ìœ í‹¸ë¦¬í‹°ë¡œì„œ ì¶©ë¶„í•œ ê°€ì¹˜ë¥¼ ì œê³µí•  ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤.

---

*ë¬¸ì„œ ë*
